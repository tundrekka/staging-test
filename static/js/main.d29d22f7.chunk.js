(this["webpackJsonpnotes-app"]=this["webpackJsonpnotes-app"]||[]).push([[0],{13:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"c",(function(){return o}));var r=n(25);n.d(e,"b",(function(){return r.a}));n(77),n(60);r.a.initializeApp({apiKey:"AIzaSyAu8R2dliBO2nQ3pc5MvX0to1k8t2n7gtQ",authDomain:"react-practices-b915b.firebaseapp.com",databaseURL:"https://react-practices-b915b-default-rtdb.firebaseio.com",projectId:"react-practices-b915b",storageBucket:"react-practices-b915b.appspot.com",messagingSenderId:"350501490135",appId:"1:350501490135:web:c830a5bc1321bd4b22cf92",measurementId:"G-L53B3RPBQG"});var a=r.a.firestore(),o=new r.a.auth.GoogleAuthProvider},19:function(t,e,n){"use strict";n.d(e,"c",(function(){return a})),n.d(e,"b",(function(){return o})),n.d(e,"d",(function(){return c})),n.d(e,"a",(function(){return u}));var r=n(5),a=function(t){return{type:r.a.uiSetError,payload:t}},o=function(){return{type:r.a.uiRemoveError}},c=function(){return{type:r.a.uiStartLoading}},u=function(){return{type:r.a.uiFinishLoading}}},29:function(t,e,n){"use strict";n.d(e,"e",(function(){return h})),n.d(e,"f",(function(){return j})),n.d(e,"g",(function(){return g})),n.d(e,"c",(function(){return O})),n.d(e,"d",(function(){return m})),n.d(e,"a",(function(){return v})),n.d(e,"b",(function(){return S}));var r,a=n(4),o=n(8),c=n.n(o),u=n(14),i=n(7),s=n.n(i),d=n(13),l=function(){var t=Object(u.a)(c.a.mark((function t(e){var n,a,o,u;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new AbortController,n=r.signal,"https://api.cloudinary.com/v1_1/dtwc8wdqx/upload",(a=new FormData).append("upload_preset","react-app"),a.append("file",e),t.prev=6,t.next=9,fetch("https://api.cloudinary.com/v1_1/dtwc8wdqx/upload",{method:"POST",body:a,signal:n});case 9:if(!(o=t.sent).ok){t.next=17;break}return t.next=13,o.json();case 13:return u=t.sent,t.abrupt("return",u.secure_url);case 17:return t.abrupt("return",null);case 18:t.next=23;break;case 20:return t.prev=20,t.t0=t.catch(6),t.abrupt("return",null);case 23:case"end":return t.stop()}}),t,null,[[6,20]])})));return function(e){return t.apply(this,arguments)}}(),p=function(t){r.abort(),t.target.value=""},f=function(){var t=Object(u.a)(c.a.mark((function t(e){var n,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d.a.collection("journal-users/".concat(e,"/notes")).orderBy("date","desc").get();case 3:return n=t.sent,r=[],n.forEach((function(t){r.push(Object(a.a)({id:t.id},t.data()))})),t.abrupt("return",r);case 9:t.prev=9,t.t0=t.catch(0),s.a.fire("Something went wrong",t.t0.message,"error");case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}(),b=n(5),h=function(){return function(){var t=Object(u.a)(c.a.mark((function t(e,n){var r,a,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s.a.fire({title:"LOADING...",allowOutsideClick:!1,showCancelButton:!1,showConfirmButton:!1}),10,t.prev=2,!(n().notes.notes.length>=10)){t.next=6;break}throw new Error("Maximum notes per user is ".concat(10));case 6:return r=n().auth.uid,a={title:"",body:"",date:(new Date).getTime()},t.next=10,d.a.collection("journal-users/".concat(r,"/notes")).add(a);case 10:o=t.sent,e(v(o.id,a)),e(k(o.id,a)),s.a.close(),s.a.fire("Created, start writing!",a.title,"success"),document.querySelector("main").classList.add("toggle"),t.next=24;break;case 18:return t.prev=18,t.t0=t.catch(2),s.a.close(),s.a.fire("Failed",t.t0.message,"error"),document.querySelector("main").classList.add("toggle"),t.abrupt("return",t.t0.message);case 24:case"end":return t.stop()}}),t,null,[[2,18]])})));return function(e,n){return t.apply(this,arguments)}}()},j=function(t){return function(){var e=Object(u.a)(c.a.mark((function e(n,r){var o,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.a.fire({title:"Updating...",allowOutsideClick:!1,showCancelButton:!1,showConfirmButton:!1}),4e3,e.prev=2,!(t.body.length>4e3)){e.next=5;break}throw new Error("Maximum digits per body-note is ".concat(4e3,", your note has ").concat(t.body.length," digits"));case 5:return o=r().auth.uid,t.url||delete t.url,delete(u=Object(a.a)({},t)).id,e.next=11,d.a.doc("journal-users/".concat(o,"/notes/").concat(t.id)).update(u);case 11:n(y(t.id,u)),s.a.close(),s.a.fire("Saved",t.title,"success"),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(2),s.a.close(),s.a.fire("Error",e.t0.message,"error");case 20:case"end":return e.stop()}}),e,null,[[2,16]])})));return function(t,n){return e.apply(this,arguments)}}()},g=function(t,e){return function(){var n=Object(u.a)(c.a.mark((function n(r,a){var o,u,i;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=!1,s.a.fire({title:"Uploading...",allowOutsideClick:!1,showCancelButton:!1,showConfirmButton:!0,confirmButtonText:"Cancel"}).then((function(t){t.isConfirmed&&(p(e),o=!0)})),n.prev=2,u=a().notes.active,n.next=6,l(t);case 6:i=n.sent,u.url=i,o||r(j(u)),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(2),s.a.fire("Something went wrong",n.t0.message,"error");case 14:case"end":return n.stop()}}),n,null,[[2,11]])})));return function(t,e){return n.apply(this,arguments)}}()},O=function(t){return function(){var e=Object(u.a)(c.a.mark((function e(n,r){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.a.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(function(){var e=Object(u.a)(c.a.mark((function e(a){var o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.isConfirmed){e.next=14;break}return s.a.fire({title:"Deleting...",allowOutsideClick:!1,showCancelButton:!1,showConfirmButton:!1}),e.prev=2,o=r().auth.uid,e.next=6,d.a.doc("journal-users/".concat(o,"/notes/").concat(t)).delete();case 6:n(x(t)),s.a.close(),s.a.fire("Deleted!","Your file has been deleted.","success"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),s.a.fire("Something went wrong",e.t0.message,"error");case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},m=function(t){return function(){var e=Object(u.a)(c.a.mark((function e(n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f(t);case 3:r=e.sent,n(w(r)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),s.a.fire("Something went wrong",e.t0.message,"error");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},v=function(t,e){return{type:b.a.notesActive,payload:Object(a.a)({id:t},e)}},w=function(t){return{type:b.a.notesLoad,payload:t}},y=function(t,e){return{type:b.a.notesUpdated,payload:{id:t,note:Object(a.a)({id:t},e)}}},x=function(t){return{type:b.a.notesDelete,payload:t}},k=function(t,e){return{type:b.a.notesUpdateSidebar,payload:Object(a.a)({id:t},e)}},S=function(){return{type:b.a.notesLogoutCleaning}}},43:function(t,e,n){"use strict";n.d(e,"c",(function(){return p})),n.d(e,"e",(function(){return f})),n.d(e,"b",(function(){return b})),n.d(e,"d",(function(){return h})),n.d(e,"a",(function(){return j}));var r=n(8),a=n.n(r),o=n(14),c=n(7),u=n.n(c),i=n(13),s=n(5),d=n(19),l=n(29),p=function(t,e){return function(n){return n(Object(d.d)()),i.b.auth().signInWithEmailAndPassword(t,e).then((function(t){var e=t.user;n(j(e.uid,e.displayName)),n(Object(d.a)())})).catch((function(t){u.a.fire("Something went wrong",t.message,"error"),n(Object(d.a)())}))}},f=function(t,e,n){return function(r){r(Object(d.d)()),i.b.auth().createUserWithEmailAndPassword(t,e).then(function(){var t=Object(o.a)(a.a.mark((function t(e){var o;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=e.user,t.next=3,o.updateProfile({displayName:n});case 3:r(j(o.uid,o.displayName)),r(Object(d.a)());case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){u.a.fire("Something went wrong",t.message,"error"),r(Object(d.a)())}))}},b=function(){return function(t){i.b.auth().signInWithPopup(i.c).then((function(e){var n=e.user;t(j(n.uid,n.displayName))})).catch((function(t){return u.a.fire("Something went wrong",t.message,"error")}))}},h=function(){return function(){var t=Object(o.a)(a.a.mark((function t(e){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.b.auth().signOut();case 3:e(g()),e(Object(l.b)()),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),u.a.fire("Something went wrong",t.t0.message,"error");case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},j=function(t,e){return{type:s.a.login,payload:{uid:t,displayName:e}}},g=function(){return{type:s.a.logout}}},5:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r={login:"[Auth] login",logout:"[Auth] logout",uiSetError:"[UI] Set Error",uiRemoveError:"[UI] Remove Error",uiStartLoading:"[UI] Start loading",uiFinishLoading:"[UI] Finish loading",notesAddNew:"[Notes] New note",notesActive:"[Notes] Set active note",notesLoad:"[Notes] Load notes",notesUpdated:"[Notes] Update note",notesFileUrl:"[Notes] Update image url",notesDelete:"[Notes] Delete note",notesLogoutCleaning:"[Notes] Logout cleaning",notesUpdateSidebar:"[Notes] Update Sidebar"}},75:function(t,e,n){},76:function(t,e,n){"use strict";n.r(e);var r=n(1),a=n.n(r),o=n(31),c=n.n(o),u=n(27),i=n(35),s=n(28),d=n(9),l=n(13),p=n(43),f=n(4),b=n(34),h=n(6),j=["isAuthenticated","component"],g=function(t){var e=t.isAuthenticated,n=t.component,r=Object(b.a)(t,j);return Object(h.jsx)(d.b,Object(f.a)(Object(f.a)({},r),{},{component:function(t){return e?Object(h.jsx)(n,Object(f.a)({},t)):Object(h.jsx)(d.a,{to:"/auth/login"})}}))},O=["isAuthenticated","component"],m=function(t){var e=t.isAuthenticated,n=t.component,r=Object(b.a)(t,O);return Object(h.jsx)(d.b,Object(f.a)(Object(f.a)({},r),{},{component:function(t){return e?Object(h.jsx)(d.a,{to:"/"}):Object(h.jsx)(n,Object(f.a)({},t))}}))},v=n(29),w=n(47),y=n(48),x=n(51),k=n(50),S=function(t){Object(x.a)(n,t);var e=Object(k.a)(n);function n(t){var r;return Object(w.a)(this,n),(r=e.call(this,t)).state={error:null,errorInfo:null},r}return Object(y.a)(n,[{key:"componentDidCatch",value:function(t,e){this.setState({error:t,errorInfo:e})}},{key:"render",value:function(){return this.state.errorInfo?Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:"Something went wrong."}),Object(h.jsx)("button",{className:"btn btn-primary",onClick:function(){window.location.reload()},children:"Try Reloading"})]}):this.props.children}}]),n}(a.a.Component),C=a.a.lazy((function(){return Promise.all([n.e(6),n.e(4)]).then(n.bind(null,181))})),A=a.a.lazy((function(){return Promise.all([n.e(2),n.e(5)]).then(n.bind(null,182))})),B=function(){var t=Object(u.b)(),e=Object(r.useState)(!0),n=Object(i.a)(e,2),a=n[0],o=n[1],c=Object(r.useState)(!1),f=Object(i.a)(c,2),b=f[0],j=f[1];return Object(r.useEffect)((function(){l.b.auth().onAuthStateChanged((function(e){(null===e||void 0===e?void 0:e.uid)?(t(Object(p.a)(e.uid,e.displayName)),j(!0),t(Object(v.d)(e.uid))):j(!1),o(!1)}))}),[t]),a?null:Object(h.jsx)(s.a,{children:Object(h.jsx)("div",{children:Object(h.jsxs)(d.d,{children:[Object(h.jsx)(S,{children:Object(h.jsxs)(r.Suspense,{fallback:null,children:[Object(h.jsx)(m,{path:"/auth",component:A,isAuthenticated:b}),Object(h.jsx)(g,{exact:!0,path:"/",component:C,isAuthenticated:b})]})}),Object(h.jsx)(d.a,{to:"/auth/login"})]})})})},E=n(26),L=n(49),N=n(5),U=n(42),I={notes:[],active:null},D={loading:!1,msgError:null},P=E.c,R=Object(E.b)({auth:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case N.a.login:return{uid:e.payload.uid,name:e.payload.displayName};case N.a.logout:return{};default:return t}},ui:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case N.a.uiSetError:return Object(f.a)(Object(f.a)({},t),{},{msgError:e.payload});case N.a.uiRemoveError:return Object(f.a)(Object(f.a)({},t),{},{msgError:null});case N.a.uiStartLoading:return Object(f.a)(Object(f.a)({},t),{},{loading:!0});case N.a.uiFinishLoading:return Object(f.a)(Object(f.a)({},t),{},{loading:!1});default:return t}},notes:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case N.a.notesActive:return Object(f.a)(Object(f.a)({},t),{},{active:Object(f.a)({},e.payload)});case N.a.notesLoad:return Object(f.a)(Object(f.a)({},t),{},{notes:Object(U.a)(e.payload)});case N.a.notesUpdated:return Object(f.a)(Object(f.a)({},t),{},{notes:t.notes.map((function(t){return t.id===e.payload.id?e.payload.note:t}))});case N.a.notesDelete:return Object(f.a)(Object(f.a)({},t),{},{active:null,notes:t.notes.filter((function(t){return t.id!==e.payload}))});case N.a.notesUpdateSidebar:return Object(f.a)(Object(f.a)({},t),{},{notes:[e.payload].concat(Object(U.a)(t.notes))});case N.a.notesLogoutCleaning:return Object(f.a)({},I);default:return t}}}),F=Object(E.d)(R,P(Object(E.a)(L.a))),T=function(){return Object(h.jsx)(u.a,{store:F,children:Object(h.jsx)(B,{})})};n(75);c.a.render(Object(h.jsx)(T,{}),document.getElementById("root"))}},[[76,1,3]]]);
//# sourceMappingURL=main.d29d22f7.chunk.js.map